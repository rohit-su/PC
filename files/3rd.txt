#include <stdio.h>
#include <stdlib.h>
#include <omp.h>

long long fib(int n) {
    if (n <= 1) return n;
    long long x, y;
    #pragma omp task shared(x)
    x = fib(n - 1);
    #pragma omp task shared(y)
    y = fib(n - 2);
    #pragma omp taskwait
    return x + y;
}

int main(int argc, char *argv[]) {
    int n = atoi(argv[1]);

    #pragma omp parallel
    #pragma omp single
    for (int i = 0; i < n; i++)
        printf("%lld ", fib(i));

    printf("\n");
    return 0;
}

//gcc -fopenmp omp_fib.c -o omp_fib
//./omp_fib 10
